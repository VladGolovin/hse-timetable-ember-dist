Генерация объектов фронтенда на проекте eais-web

Для генерации объектов фронтенда потребуется:

1.  Сгенерировать объекты фронтенда (класса и L, E формы):

    ![](media/02f4485903c2c9a1cdaab8f9fd75e645.png)

2.  Удалить english локали

![](media/0c38b93d4af31b5ed2551ec4bdea8b96.png)

1.  В контроллерах списка и редактирования заменить импортируемые контроллеры с
    ember-flexberry на eais-common

![](media/9511389f57bac2b304ab0886198a6b31.png)

1.  Аналогично заменить в роутах списка, редактирования и роута создания
    сущности.

2.  Добавить новые локали в файл translations.

![](media/c1401963e60bbad9d6c3f6a24ea628dc.png)

1.  Из миксина модели вырезать функцию getValidations и переместить в файл
    модели. В файле модели добавить импорт Ember и сообщение валидации об
    ошибке.

![](media/f84bbbc7ff084a26a19ad7ef1a3a32d9.png)

![](media/db5566611af153a67487a4efbedebab1.png)

1.  В шаблоне формы редактирования заменить шапку (тулбар) из какой-нибудь
    соседней формы, в ней уже будет добавлены кнопки: «Назад», «Показать аудит»,
    доработан блок с сообщениями валидации.

![](media/997d4dd674f5fa0ba05088c18000fe91.png)

Для полей убрать лишний перенос строки в имени компонента, убрать required=true.
Добавить компонент eais-required-marker для обязательных полей. Добавить легенду
eais-required-note в конец формы. Добавить, пропущенную генератором, табуляцию
по всей форме.

![](media/b81387d30c7342c22a8274009cda7b5b.png)

Для лукапа:

-   Переименовать в flexberry-lookup-custom

-   В атрибуты добавить lookupWindowCustomProperties=(action
    'getLookupFolvProperties')

-   Проверить наличие displayAttributeName

-   Добавить атрибут componentName

Для редактируемых списков(flexberry-groupedit):

1.  Переименовать в flexberry-groupedit-custom

2.  В атрибуты добавить:

    1.  createNewButton=(if readonly false true)

    2.  deleteButton=(if readonly false true)

    3.  showAsteriskInRow=(if readonly false true)

    4.  showCheckBoxInRow=(if readonly false true)

3.  На форме списка:

    1.  Заменить компонент вывода ошибок flexberry-error на eais-error

    2.  Заменить списковый компонент flexberry-objectlistview на flexberry-olv

    ![](media/8e83271de55fa86120751f11a8132302.png)

    Заменить тело компонента flexberry-olv (осторожно скопировать свойства между
    modelName и componentName из соседней списковой формы):

4.  В роутер приложения SocialProtection добавить роуты нового класса

![](media/419b3243959a4a96f01890cf2a9d5824.png)

1.  Добавить ссылку в меню приложения на класс, если требуется. Тут указываются:

2.  имя модели для проверки прав пользователя на просмотр класса

3.  ссылка на списковый роут модели

4.  Текст ссылки на списковую форму, обычно подходил заголовк списковой формы

![](media/5f6667f4f833e434d10ccb8247710606.png)

1.  Поднять версию аддона в файле package.json, в котором производились
    изменения в файле

![](media/fd65607317aad44444f08cf8cc26f493.png)

И поднять его версию в зависимостях приложения

![](media/e2cb51b31dcb4351878599f4ed819874.png)

1.  При сборке проекта в консоли могут появляться сообщения об ошибках
    синтаксиса, стиля от расширения eslint

![](media/b46f23e410886d9a06b00fa62386e763.png)

Их нужно устранять
